{"version":3,"sources":["treyyoder:kys/kys.js"],"names":[],"mappings":";;;;;;;;AAAA,yB;AACA,8B;AACA,c;AACA,oB;AACA,kB;AACA,kD;AACA,E;AACA,kD;AACA,6B;AACA,qC;AACA,6B;AACA,E;AACA,uB;AACA,G;AACA,mC;AACA,wI;AACA,e;AACA,e;AACA,8B;AACA,gD;AACA,sB;AACA,4B;AACA,gC;AACA,uB;AACA,8C;AACA,gC;AACA,a;AACA,4B;AACA,gC;AACA,uB;AACA,8C;AACA,gC;AACA,Y;AACA,U;AACA,e;AACA,W;AACA,M;AACA,G;AACA,2B;AACA,8E;AACA,e;AACA,e;AACA,8B;AACA,6B;AACA,c;AACA,4C;AACA,oB;AACA,Y;AACA,G;AACA,2B;AACA,kB;AACA,4B;AACA,2B;AACA,K;AACA,kE;AACA,yC;AACA,mB;AACA,e;AACA,0D;AACA,iB;AACA,W;AACA,gB;AACA,I;AACA,I;AACA,uC;;AAEA,G;AACA,0C;AACA,qB;AACA,iD;AACA,8B;AACA,iD;AACA,kD;AACA,oB;AACA,I;AACA,G;AACA,2C;AACA,E;AACA,Y;AACA,uB;AACA,oB;AACA,8D;AACA,0D;AACA,yB;AACA,Q;AACA,K;AACA,oB;AACA,yB;AACA,O;AACA,yB;AACA,uD;AACA,+F;AACA,I;AACA,wB;AACA,yB;AACA,4B;AACA,qD;AACA,kC;AACA,Y;AACA,M;AACA,K;AACA,I;AACA,wD;AACA,gJ;AACA,4I;AACA,sL;AACA,4L;AACA,I;AACA,wC;AACA,I;AACA,+G;AACA,qG;AACA,I;AACA,6C;AACA,iE;AACA,K;AACA,I;AACA,0F;AACA,sB;AACA,2C;AACA,S;AACA,I;AACA,6D;AACA,I;AACA,I;AACA,K;AACA,G;AACA,4B;AACA,U;AACA,c;AACA,e;AACA,mB;AACA,kB;AACA,qB;AACA,sB;AACA,I;AACA,G;AACA,uB;AACA,qB;AACA,uD;AACA,6C;AACA,2D;AACA,gB;AACA,0B;AACA,0B;AACA,2C;AACA,+B;AACA,K;;AAEA,c;AACA,E;AACA,C","file":"/packages/treyyoder_kys.js","sourcesContent":["Meteor.KnowYourStates = {\n\tcurrentSelectedState : null,\t\n\tcapital:null,\n\tinit : function() {\n\t\tvar self = this;\n\t\t$(\"span:contains('Stamen Watercolor')\").click();\n\t\t\n\t\twindow.LUtil.geojson = L.geoJson(StateGeoData, {\n\t\t\tstyle : this.styleDefault,\n\t\t\tonEachFeature : this.onEachFeature\n\t\t}).addTo(window.LUtil.map);\n\t\t\n\t\tself.addControls();\t\t\n\t},\n\tgetImage : function(keys, divID) {\n\t\t$.getJSON(\"https://ajax.googleapis.com/ajax/services/search/images?as_rights=(cc_publicdomain|cc_attribute|cc_sharealike)&callback=?\",\n\t\t\t\t\t{q : keys,\n\t\t\t\t\t v : '1.0'\n\t\t\t\t\t}, function(data) {\t\t\t\t\t\t\n\t\t\t\t\t\t$.ajax(data.responseData.results[0].url, {\n\t\t\t\t\t\t\t  statusCode: {\n\t\t\t\t\t\t\t    404: function() {\n\t\t\t\t\t\t\t    \t$(\"#\"+divID).append(\n\t\t\t\t\t\t\t\t\t\t\t'<img src=\"'\n\t\t\t\t\t\t\t\t\t\t\t\t+ data.responseData.results[1].url\n\t\t\t\t\t\t\t\t\t\t\t\t+ '\"width=\"300\" >');\n\t\t\t\t\t\t\t    },\n\t\t\t\t\t\t\t    200: function() {\n\t\t\t\t\t\t\t    \t$(\"#\"+divID).append(\n\t\t\t\t\t\t\t\t\t\t\t'<img src=\"'\n\t\t\t\t\t\t\t\t\t\t\t\t+ data.responseData.results[0].url\n\t\t\t\t\t\t\t\t\t\t\t\t+ '\"width=\"300\" >');\n\t\t\t\t\t\t\t    }\n\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t})\t\t\t\t\t\t\n\t\t\t\t   \t});\n\t\t\t\t\t\t\n\t},\n\tgetText : function(keys) {\n\t\t$.getJSON(\"https://ajax.googleapis.com/ajax/services/search/web?callback=?\",\n\t\t\t\t\t{q : keys,\n\t\t\t\t\t v : '1.0'\n\t\t\t\t\t}, function(data) {\t\t\t\t\t\t\n\t\t\t\t\t\t$(\"#stateBird\").append(\n\t\t\t\t\t\t\t'<div>'\n\t\t\t\t\t\t\t\t+ data.responseData.results[0].title\n\t\t\t\t\t\t\t\t+ '</div>');\n\t\t\t\t\t   \t});\n\t},\n\taddControls : function() {\n\t\tvar self = this;\n\t\tself.details = L.control({\n\t\t\tposition : 'bottomright'\n\t\t});\n\t\tself.details.onAdd = self.onAddHandler('state-detail info', '');\n\t\tself.details.update = function(props) {\n\t\t\tvar self = this;\n\t\t\tif (props) {\n\t\t\t\tBlaze.renderWithData(Template.mapRecallDetails, props,\n\t\t\t\t\t\tthis._div);\n\t\t\t} else {\n\t\t\t\tself.hide();\n\t\t\t}\n\t\t};\n\t\tself.details.addTo(window.LUtil.map);\n\n\t},\n\tonAddHandler : function(selector, html) {\n\t\treturn function() {\n\t\t\tthis._div = L.DomUtil.create('div', selector);\n\t\t\tthis._div.innerHTML = html;\n\t\t\tL.DomEvent.disableClickPropagation(this._div);\n\t\t\tL.DomEvent.disableScrollPropagation(this._div);\n\t\t\treturn this._div;\n\t\t};\n\t},\n\tonEachFeature : function(feature, layer) {\n\t\t\n\t\tlayer.on({\n\t\t\tclick : function() {\n\t\t\t\tvar self = this;\n\t\t\t\tif (Meteor.KnowYourStates.currentSelectedState !== null) {\n\t\t\t\t\tMeteor.KnowYourStates.currentSelectedState.setStyle({\n\t\t\t\t\t\tfillColor : 'white'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tlayer.setStyle({\n\t\t\t\t\tfillColor : 'yellow'\n\t\t\t\t});\n\t\t\t\t$(\".image\").html(\"\");\n\t\t\t\tMeteor.KnowYourStates.currentSelectedState = layer;\n\t\t\t\tvar stateAbbr = Meteor.KnowYourStates.currentSelectedState.feature.properties.abbreviation;\n\t\t\t\t\n\t\t\t\tvar detailHTML = \"\";\n\t\t\t\tvar currState = null;\n\t\t\t\tfor(state in StateData){\n\t\t\t\t\tif(StateData[state].abbreviation === stateAbbr){\n\t\t\t\t\t\tcurrState = StateData[state]\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tdetailHTML+=\"<div><h3>\"+currState.name+\"</h3></div>\"\n\t\t\t\tdetailHTML+=\"<div><div class='col-md-6 text-right'><b>State Capital:</b></div><div class='col-md-6'>\"+currState.state_capital+\"</div></div>\"\n\t\t\t\tdetailHTML+=\"<div><div class='col-md-6 text-right'><b>State Motto:</b></div><div class='col-md-6'>\"+currState.state_motto+\"</div></div>\"\n\t\t\t\tdetailHTML+=\"<div><div class='col-md-6 text-right'><b>State Bird:</b></div><div class='col-md-6'>\"+currState.state_bird+\"</div></div><div class='col-md-12' id='stateBird'></div>\"\n\t\t\t\tdetailHTML+=\"<div><div class='col-md-6 text-right'><b>State Flower:</b></div><div class='col-md-6'>\"+currState.state_flower+\"</div></div><div class='col-md-12' id='stateFlower'></div>\"\n\t\t\t\t\n\t\t\t\t$(\".state-detail\").html(detailHTML);\n\t\t\t\t\n\t\t\t\tMeteor.KnowYourStates.getImage(currState.name+\" State Flower \"+ currState.state_flower, \"stateFlower\");\t\t\t\t\n\t\t\t\tMeteor.KnowYourStates.getImage(currState.name+\" State Bird \"+ currState.state_bird, \"stateBird\");\n\t\t\t\t\n\t\t\t\tif(Meteor.KnowYourStates.capital!==null){\n\t\t\t\t\twindow.LUtil.map.removeLayer(Meteor.KnowYourStates.capital);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tMeteor.KnowYourStates.capital = new L.Marker([currState.cap_lat, currState.cap_lon], {\n\t\t\t\t\tdraggable : true,\n\t\t\t\t\ticon : Meteor.KnowYourStates.getStar()\n\t\t\t\t});\t\t\n\t\t\t\t\n\t\t\t\twindow.LUtil.map.addLayer(Meteor.KnowYourStates.capital);\n\t\t\t\t\n\t\t\t}\n\t\t});\n\t},\n\tstyleDefault : function() {\n\t\treturn {\n\t\t\tweight : 2,\n\t\t\topacity : 5,\n\t\t\tcolor : 'black',\n\t\t\tdashArray : '',\n\t\t\tfillOpacity : 0.1,\n\t\t\tfillColor : 'white'\n\t\t};\n\t},\n\tgetStar : function() {\n\t\tvar icon = L.icon({\n\t\t\ticonUrl : '/packages/treyyoder_kys/images/star.png',\n\t\t\ticonSize : [ 20, 20 ], // size of the icon\n\t\t\ticonAnchor : [ 10, 10 ], // point of the icon which will\n\t\t\t// correspond\n\t\t\t// to marker's location\n\t\t\tpopupAnchor : [ 0, 10 ]\n\t\t// point from which the popup should open\n\t\t// relative to the iconAnchor\n\t\t});\n\n\t\treturn icon;\n\t}\n}"]}